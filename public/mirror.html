<!-- css files -->
<link rel="stylesheet" type="text/css" href="mirror.css" />
<!-- js files -->
<script src="mirror.js"></script>
<script src="javaScript/clockFunctions.js"></script>

<html>
    <body>
        <!-- Container for the clock -->
        <div id="time_container">
            <!-- holds the mintues -->
            <div id="time"></div>
            <!-- holds am or pm -->
            <div id="time_of_day"></div>
        </div>    
        <br><br>
        <!-- Container for the spotify content -->
        <div id="spotify_content">
            <img id="album_cover" src="images/TPAB_Album_Cover.jpg">
            <br>
            <marquee id="song_info" behavior="scroll" direction="left" scrollamount="1">Log In To Spotify</marquee>
        </div>
        <!-- Container for the news content -->
        <div id="news_container">
            <div id="news_header" style="font-size: 25px;">&#128240; News</div>
            <br>
            <div id="news_article"></div>
        </div>	
        <meta charset="utf-8">
        
    <!-- This section is used for displaying the weather data and icon image -->
    <section>
        <div id="weather-container">
            <div id="weather-icon"></div>
            <div id="weather-info">
            <div id="weather-icon"></div>
            <div id="all-temps">
                <p id="temperature"></p>
                <p id="high"></p>
                <p id="low"></p>
            </div>
            </div>
            <p id="error"></p>
        </div>
        <script>
            // establishes variables which will be used to display weather information
            const temperatureElem = document.querySelector('#temperature');
            const highElem = document.querySelector('#high');
            const lowElem = document.querySelector('#low');
            const iconElem = document.querySelector('#weather-icon');
          
            fetch('/weather', { // route used in combination with the index.js file
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
              }
            }).then(function(response) {
              return response.json();
            }).then(function(weather) {
                // console.log(weather);
                // this section is used to convert the temperature received from the api from celsius to farhenheit
                temperatureElem.textContent = 'Current: ' + (weather.temperature * 9/5 + 32).toFixed(0) + ' °F';
                highElem.textContent = 'High: ' + (weather.high * 9/5 + 32).toFixed(0) + ' °F';
                lowElem.textContent = 'Low: ' + (weather.low * 9/5 + 32).toFixed(0) + ' °F';
                iconElem.style.backgroundImage = `url(http://openweathermap.org/img/w/${weather.icon}.png)`;
                document.getElementById("weather-icon").src = weather.icon;

            }).catch(function() {
                console.log('Error fetching weather data');
            });
        </script>
    </section> 
    </body>
</html>